<!DOCTYPE html>
<html>
  <body>
    <script>
      let basicSalary = parseFloat(prompt("Enter Basic Salary (Ksh):"));
      let benefits = parseFloat(prompt("Enter Benefits (Ksh):"));

      if (
        isNaN(basicSalary) ||
        isNaN(benefits) ||
        basicSalary < 0 ||
        benefits < 0
      ) {
        alert("Please enter valid positive numbers");
      } else {
        let grossSalary = basicSalary + benefits;

        // Calculate NSSF Contribution (Employee share - 6% of pensionable pay)
        let nssfDeductions = 0;
        const tier1Limit = 8000;
        const tier2Limit = 72000;

        if (grossSalary <= tier1Limit) {
          nssfDeductions = grossSalary * 0.06;
        } else if (grossSalary <= tier2Limit) {
          nssfDeductions =
            tier1Limit * 0.06 + (grossSalary - tier1Limit) * 0.06;
        } else {
          nssfDeductions = tier1Limit * 0.06 + (tier2Limit - tier1Limit) * 0.06;
        }

        // Calculate SHIF Contribution (2.75% of gross salary)
        const shifDeductions = grossSalary * 0.0275;

        // Calculate Housing Levy (1.5% of gross salary - employee share)
        const housingLevy = grossSalary * 0.015;

        // Calculate Taxable Income (Gross minus deductible contributions)
        const taxableIncome =
          grossSalary - nssfDeductions - shifDeductions - housingLevy;

        // Calculate PAYE Tax based on KRA brackets
        let payee = 0;
        const personalRelief = 2400;

        if (taxableIncome <= 24000) {
          payee = taxableIncome * 0.1;
        } else if (taxableIncome <= 32333) {
          payee = 24000 * 0.1 + (taxableIncome - 24000) * 0.25;
        } else if (taxableIncome <= 500000) {
          payee =
            24000 * 0.1 +
            (32333 - 24000) * 0.25 +
            (taxableIncome - 32333) * 0.3;
        } else if (taxableIncome <= 800000) {
          payee =
            24000 * 0.1 +
            (32333 - 24000) * 0.25 +
            (500000 - 32333) * 0.3 +
            (taxableIncome - 500000) * 0.325;
        } else {
          payee =
            24000 * 0.1 +
            (32333 - 24000) * 0.25 +
            (500000 - 32333) * 0.3 +
            (800000 - 500000) * 0.325 +
            (taxableIncome - 800000) * 0.35;
        }

        payee = Math.max(0, payee - personalRelief);

        const totalDeductions =
          payee + nssfDeductions + shifDeductions + housingLevy;

        const netSalary = grossSalary - totalDeductions;

        alert(
          "SALARY CALCULATION RESULTS:\n\n" +
            "Gross Salary: Ksh " +
            grossSalary.toFixed(2) +
            "\n" +
            "PAYE (Tax): Ksh " +
            payee.toFixed(2) +
            "\n" +
            "NSSF Deductions: Ksh " +
            nssfDeductions.toFixed(2) +
            "\n" +
            "SHIF Deductions: Ksh " +
            shifDeductions.toFixed(2) +
            "\n" +
            "Housing Levy: Ksh " +
            housingLevy.toFixed(2) +
            "\n" +
            "Total Deductions: Ksh " +
            totalDeductions.toFixed(2) +
            "\n" +
            "NET SALARY: Ksh " +
            netSalary.toFixed(2)
        );
      }
    </script>
  </body>
</html>
